{"version":3,"names":["cov_oql58h98e","actualCoverage","s","core_1","require","auth","tslib_1","__importStar","rxjs_1","Auth","f","b","AuthService","constructor","ngFirebaseAuth","ngLocalStorage","SignIn","AuthLogin","GoogleAuthProvider","SignOut","from","signOut","AuthState","authState","pipe","map","user","save","User","refreshToken","remove","provider","signInWithPopup","__decorate","Injectable","providedIn","exports"],"sources":["C:\\Users\\ploutarchosm\\Desktop\\GIT\\k6c6KIx4wbYIMnoNorW7\\src\\app\\auth\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport * as auth from 'firebase/auth';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport firebase from 'firebase/compat';\nimport { from, map, Observable } from 'rxjs';\nimport { LocalStorageService } from '@app/services/local-storage.service';\n\nenum Auth {\n  User = 'user',\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService {\n  constructor(\n    private ngFirebaseAuth: AngularFireAuth,\n    private ngLocalStorage: LocalStorageService\n  ) {}\n\n  SignIn() {\n    return this.AuthLogin(new auth.GoogleAuthProvider());\n  }\n\n  SignOut(): Observable<void> {\n    return from(this.ngFirebaseAuth.signOut());\n  }\n\n  AuthState() {\n    return this.ngFirebaseAuth.authState.pipe(\n      map(user => {\n        if (user) {\n          this.ngLocalStorage.save(Auth.User, user.refreshToken);\n          return true;\n        } else {\n          this.ngLocalStorage.remove(Auth.User);\n          return false;\n        }\n      })\n    );\n  }\n\n  private AuthLogin(\n    provider: firebase.auth.AuthProvider\n  ): Observable<firebase.auth.UserCredential> {\n    return from(this.ngFirebaseAuth.signInWithPopup(provider));\n  }\n}\n"],"mappings":"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"}